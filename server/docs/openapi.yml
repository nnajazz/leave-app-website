openapi: 3.0.0
info:
  title: WGS Cuti API
  description: API documentation for the WGS Cuti application
  version: 1.0.0
servers:
  - url: /api/v1
tags:
  - name: Auth
    description: Operations related to authentication.
  - name: Super Admin
    description: Operations available only to super admins.
  - name: Karyawan
    description: Operations available to employees.
  - name: Admin
    description: Operations available to admins.
  - name: Dashboard
    description: Operations related to dashboard.
paths:
  /auth/login:
    post:
      tags:
        - Auth
      summary: Log in to the application
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginRequest"
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoginSuccessResponse"
        "400":
          description: Bad Request - Validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Unauthorize
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /auth/logout:
    get:
      tags:
        - Auth
      summary: Log out of the application
      security:
        - cookieAuth: []
      responses:
        "200":
          description: Logout successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "You have been successfully logged out."
        "403":
          description: Forbidden - Invalid or expired token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /dashboard/statistics:
    get:
      tags:
        - Admin
      summary: Get dashboard statistics
      security:
        - cookieAuth: []
      responses:
        "200":
          description: Statistics fetched successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DashboardStatisticsResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /dashboard/trend:
    get:
      tags:
        - Admin
      summary: Get dashboard trend
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: year
          schema:
            type: integer
      responses:
        "200":
          description: Trend data fetched successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DashboardTrendResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /dashboard/leaderboard:
    get:
      tags:
        - Admin
      summary: Get dashboard leaderboard
      security:
        - cookieAuth: []
      responses:
        "200":
          description: Leaderboard data fetched successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DashboardLeaderboardResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /dashboard/pending-leave:
    get:
      tags:
        - Dashboard
      summary: Get dashboard pending leaves
      security:
        - cookieAuth: []
      responses:
        "200":
          description: Pending leaves data fetched successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DashboardPendingLeavesResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /uploads/import:
    post:
      tags:
        - Super Admin
      summary: Import user data from a CSV file
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: The CSV file to import.
      responses:
        "200":
          description: File imported successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ImportSuccessResponse"
        "400":
          description: Bad Request - Invalid file type or no file uploaded
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /uploads/balance-adjustment:
    post:
      tags:
        - Admin
      summary: Import balance adjustment data from a CSV file
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: The CSV file to import.
      responses:
        "200":
          description: File imported successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Balance Adjustment data imported successfully."
                  data:
                    type: object
                    properties:
                      process:
                        type: object
                        properties:
                          data_received:
                            type: integer
                            example: 100
        "400":
          description: Bad Request - Invalid file type, no file uploaded, or invalid data in CSV
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /uploads/export:
    get:
      tags:
        - Super Admin
      summary: Export data to a CSV file
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: target
          required: true
          schema:
            type: string
            enum: [leave, user, balance, log]
          description: The data to export.
      responses:
        "200":
          description: A CSV file containing the requested data.
          content:
            text/csv:
              schema:
                type: string
                format: binary
                example: "automatically download file"
        "403":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /balances/logs:
    get:
      tags:
        - Admin
      summary: Get all balance adjustment logs
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: start
          schema:
            type: string
            format: date
          description: Start date for filtering
        - in: query
          name: end
          schema:
            type: string
            format: date
          description: End date for filtering
        - in: query
          name: year
          schema:
            type: integer
          description: Filter by balance year
        - in: query
          name: value
          schema:
            type: string
          description: Search by NIK, fullname, or actor
      responses:
        "200":
          description: A list of balance adjustment logs
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BalanceAdjustmentListResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /balances/logs/me:
    get:
      tags:
        - Karyawan
      summary: Get current user's balance adjustment logs
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: start
          schema:
            type: string
            format: date
          description: Start date for filtering
        - in: query
          name: end
          schema:
            type: string
            format: date
          description: End date for filtering
        - in: query
          name: year
          schema:
            type: integer
          description: Filter by balance year
        - in: query
          name: value
          schema:
            type: string
          description: Search by NIK, fullname, or actor
      responses:
        "200":
          description: A list of balance adjustment logs
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BalanceAdjustmentListResponse"
        "403":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /leaves/logs:
    get:
      tags:
        - Admin
      summary: Get all leave logs
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        "200":
          description: A list of leave logs
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LeaveLogListResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /leaves/logs/search:
    get:
      tags:
        - Admin
      summary: Search leave logs
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: value
          schema:
            type: string
        - in: query
          name: type
          schema:
            type: string
        - in: query
          name: status
          schema:
            type: string
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        "200":
          description: A list of matching leave logs
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LeaveLogListResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /leaves/{id}:
    patch:
      tags:
        - Admin
      summary: Update a leave request status
      security:
        - cookieAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          description: The ID of the leave request to update.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateLeaveRequest"
      responses:
        "200":
          description: Leave request updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Successfully updated leave data"
                  data:
                    type: object
                    properties:
                      updated_leave:
                        $ref: "#/components/schemas/tb_leave"
        "400":
          description: Bad Request - Validation error or other client-side error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - User cannot approve/reject their own leave
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /users/:
    get:
      tags:
        - Karyawan
      summary: Get all users
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: search
          schema:
            type: string
        - in: query
          name: isMale
          schema:
            type: boolean
        - in: query
          name: statusName
          schema:
            type: string
        - in: query
          name: roleSlug
          schema:
            type: string
        - in: query
          name: isActive
          schema:
            type: boolean
      responses:
        "200":
          description: User data retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserListResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /users/me:
    get:
      tags:
        - Karyawan
      summary: Get current user data
      security:
        - cookieAuth: []
      responses:
        "200":
          description: User data retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"
        "403":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /users/{nik}:
    get:
      tags:
        - Admin
      summary: Get user data by NIK
      security:
        - cookieAuth: []
      parameters:
        - in: path
          name: nik
          required: true
          schema:
            type: string
          description: The NIK of the user to retrieve.
      responses:
        "200":
          description: User data retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"
        "403":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /users/{nik}/balance:
    patch:
      tags:
        - Admin
      summary: Modify a user's leave balance
      security:
        - cookieAuth: []
      parameters:
        - in: path
          name: nik
          required: true
          schema:
            type: string
          description: The NIK of the user to modify balance.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ModifyBalanceRequest"
      responses:
        "200":
          description: Balance adjusted successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ModifyBalanceResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /users/{nik}/leave-trend:
    get:
      tags:
        - Karyawan
      summary: Get leave trend for a user
      security:
        - cookieAuth: []
      parameters:
        - in: path
          name: nik
          required: true
          schema:
            type: string
          description: The NIK of the user to retrieve leave trend.
      responses:
        "200":
          description: Leave trend data retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LeaveTrendResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /users/leave:
    post:
      tags:
        - Karyawan
      summary: Create a new leave request
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateLeaveRequest"
      responses:
        "201":
          description: Leave request created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Leave request created successfully"
                  data:
                    $ref: "#/components/schemas/tb_leave"
        "400":
          description: Bad Request - Validation error or other client-side error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    get:
      tags:
        - Karyawan
      summary: Get leave requests for the current user
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        "200":
          description: A list of leave requests for the user
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserLeaveListResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /users/leave/search:
    get:
      tags:
        - Karyawan
      summary: Search and filter leave requests for the current user
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: type
          schema:
            type: string
            enum: [personal, mandatory, special]
          description: Filter by leave type
        - in: query
          name: status
          schema:
            type: string
            enum: [pending, approved, rejected]
          description: Filter by leave status
        - in: query
          name: value
          schema:
            type: string
          description: Search by leave title
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        "200":
          description: A list of matching leave requests for the user
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserLeaveListResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /users/leave/{id}:
    get:
      tags:
        - Karyawan
      summary: Get a specific leave request by ID
      security:
        - cookieAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
          description: The ID of the leave request to retrieve.
      responses:
        "200":
          description: Successfully retrieved leave data by ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Successfully retrieved leave data by ID"
                  data:
                    $ref: "#/components/schemas/tb_leave"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /users/mandatory:
    get:
      tags:
        - Karyawan
      summary: Get all available mandatory leaves
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        "200":
          description: A list of mandatory leaves
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserMandatoryLeaveListResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /setting:
    get:
      tags:
        - Super Admin
      summary: Get application settings
      security:
        - cookieAuth: []
      responses:
        "200":
          description: Successfully retrieved the setting data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetSettingResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    patch:
      tags:
        - Super Admin
      summary: Update application settings
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                light_image:
                  type: string
                  format: binary
                light_background:
                  type: string
                  example: "#FFFFFF"
                light_foreground:
                  type: string
                  example: "#000000"
                light_card:
                  type: string
                  example: "#F0F0F0"
                light_cardForeground:
                  type: string
                  example: "#000000"
                light_primary:
                  type: string
                  example: "#3B82F6"
                light_primaryForeground:
                  type: string
                  example: "#FFFFFF"
                light_secondary:
                  type: string
                  example: "#6B7280"
                light_secondaryForeground:
                  type: string
                  example: "#FFFFFF"
                dark_image:
                  type: string
                  format: binary
                dark_background:
                  type: string
                  example: "#1A1A1A"
                dark_foreground:
                  type: string
                  example: "#FFFFFF"
                dark_card:
                  type: string
                  example: "#2A2A2A"
                dark_cardForeground:
                  type: string
                  example: "#FFFFFF"
                dark_primary:
                  type: string
                  example: "#3B82F6"
                dark_primaryForeground:
                  type: string
                  example: "#FFFFFF"
                dark_secondary:
                  type: string
                  example: "#6B7280"
                dark_secondaryForeground:
                  type: string
                  example: "#FFFFFF"
      responses:
        "200":
          description: Successfully updated the setting data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "successfully updated the setting data"
                  data:
                    $ref: "#/components/schemas/SettingData"
        "400":
          description: Bad Request - Validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /leaves:
    get:
      tags:
        - Admin
      summary: Get all leave requests
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
        - in: query
          name: limit
          schema:
            type: integer
      responses:
        "200":
          description: A list of all leave requests
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LeaveListResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /leaves/search:
    get:
      tags:
        - Admin
      summary: Search leave requests
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: type
          schema:
            type: string
            enum: [nik, fullname]
        - in: query
          name: value
          schema:
            type: string
        - in: query
          name: page
          schema:
            type: integer
        - in: query
          name: limit
          schema:
            type: integer
      responses:
        "200":
          description: A list of matching leave requests
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LeaveListResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /leaves/special:
    get:
      tags:
        - Admin
      summary: Get all special leaves
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
        - in: query
          name: limit
          schema:
            type: integer
      responses:
        "200":
          description: A list of all special leaves
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SpecialLeaveListResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    post:
      tags:
        - Admin
      summary: Create a new special leave
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateSpecialLeaveRequest"
      responses:
        "201":
          description: Special leave created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/tb_special_leave"
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /leaves/special/search:
    get:
      tags:
        - Admin
      summary: Search for special leaves
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: value
          schema:
            type: string
        - in: query
          name: page
          schema:
            type: integer
        - in: query
          name: limit
          schema:
            type: integer
      responses:
        "200":
          description: A list of matching special leaves
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SpecialLeaveListResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /leaves/special/{id}:
    patch:
      tags:
        - Admin
      summary: Update a special leave
      security:
        - cookieAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateSpecialLeaveRequest"
      responses:
        "200":
          description: Special leave updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/tb_special_leave"
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /leaves/mandatory:
    get:
      tags:
        - Admin
      summary: Get all mandatory leaves
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
        - in: query
          name: limit
          schema:
            type: integer
      responses:
        "200":
          description: A list of all mandatory leaves
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MandatoryLeaveListResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    post:
      tags:
        - Admin
      summary: Create a new mandatory leave
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateMandatoryLeaveRequest"
      responses:
        "201":
          description: Mandatory leave created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/tb_mandatory_leave"
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /leaves/mandatory/search:
    get:
      tags:
        - Admin
      summary: Search for mandatory leaves
      security:
        - cookieAuth: []
      parameters:
        - in: query
          name: value
          schema:
            type: string
        - in: query
          name: page
          schema:
            type: integer
        - in: query
          name: limit
          schema:
            type: integer
      responses:
        "200":
          description: A list of matching mandatory leaves
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MandatoryLeaveListResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /leaves/mandatory/{id}:
    patch:
      tags:
        - Admin
      summary: Update a mandatory leave
      security:
        - cookieAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateMandatoryLeaveRequest"
      responses:
        "200":
          description: Mandatory leave updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/tb_mandatory_leave"
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /leaves/mandatory-year/{year}:
    patch:
      tags:
        - Admin
      summary: Update mandatory leave year
      security:
        - cookieAuth: []
      parameters:
        - in: path
          name: year
          required: true
          schema:
            type: integer
      responses:
        "201":
          description: Mandatory leave updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Mandatory leave updated successfully
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: Authorization
  schemas:
    Pagination:
      type: object
      properties:
        current_page:
          type: integer
          example: 1
        last_visible_page:
          type: integer
          example: 1
        has_next_page:
          type: boolean
          example: false
        item:
          type: object
          properties:
            count:
              type: integer
              example: 1
            total:
              type: integer
              example: 1
            per_page:
              type: integer
              example: 10
    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        status_code:
          type: integer
        message:
          type: string
        detail:
          type: string
        stack:
          type: string
    ImportSuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            process:
              type: object
              properties:
                data_received:
                  type: integer
                  example: 100
    GetSettingResponse:
      type: object
      properties:
        message:
          type: string
          example: "successfully retrieved the setting data"
        data:
          $ref: "#/components/schemas/SettingData"
    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          format: password
          minLength: 8
          maxLength: 16
    LoginSuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Welcome John Doe"
        data:
          type: object
          properties:
            nik:
              type: string
            name:
              type: string
            role:
              type: object
              properties:
                id:
                  type: integer
                name:
                  type: string
                slug:
                  type: string
            status:
              type: object
              properties:
                id:
                  type: integer
                name:
                  type: string
                slug:
                  type: string
    DashboardStatisticsResponse:
      type: object
      properties:
        message:
          type: string
        data:
          $ref: "#/components/schemas/DashboardStatistics"
    DashboardStatistics:
      type: object
      properties:
        totalEmployees:
          type: object
          properties:
            total:
              type: integer
            activeEmployees:
              type: integer
            resignEmployees:
              type: integer
        thisYearLeave:
          type: integer
        weeklyLeave:
          type: integer
        pendingLeaves:
          type: integer
    DashboardTrendResponse:
      type: object
      properties:
        message:
          type: string
        data:
          $ref: "#/components/schemas/DashboardTrend"
    DashboardTrend:
      type: object
      properties:
        year:
          type: integer
        availableYears:
          type: array
          items:
            type: integer
        trend:
          type: array
          items:
            $ref: "#/components/schemas/DashboardTrendMonth"
    DashboardTrendMonth:
      type: object
      properties:
        month:
          type: string
        mandatory_leave:
          type: integer
        special_leave:
          type: integer
        personal_leave:
          type: integer
    DashboardLeaderboardResponse:
      type: object
      properties:
        message:
          type: string
        data:
          $ref: "#/components/schemas/DashboardLeaderboard"
    DashboardLeaderboard:
      type: object
      properties:
        most_used:
          type: array
          items:
            $ref: "#/components/schemas/DashboardLeaderboardItem"
        least_used:
          type: array
          items:
            $ref: "#/components/schemas/DashboardLeaderboardItem"
    DashboardLeaderboardItem:
      type: object
      properties:
        NIK:
          type: string
        name:
          type: string
        role:
          type: string
        this_year:
          type: integer
        last_year:
          type: integer
        total_amount:
          type: integer
        average_leave:
          type: number
    DashboardPendingLeavesResponse:
      type: object
      properties:
        message:
          type: string
        data:
          $ref: "#/components/schemas/DashboardPendingLeaves"
    DashboardPendingLeaves:
      type: object
      properties:
        pendingLeaveList:
          type: object
          properties:
            total_employee:
              type: integer
            data:
              type: array
              items:
                $ref: "#/components/schemas/DashboardPendingLeaveItem"
    DashboardPendingLeaveItem:
      type: object
      properties:
        NIK:
          type: string
        name:
          type: string
        role:
          type: string
        type:
          type: string
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time
        duration:
          type: string
        status:
          type: string
    SettingData:
      type: object
      properties:
        id:
          type: string
          format: uuid
        light_color:
          $ref: "#/components/schemas/LightColor"
        dark_color:
          $ref: "#/components/schemas/DarkColor"
    LightColor:
      type: object
      properties:
        light_image:
          type: string
          format: uri
          example: "http://localhost:5000/uploads/dark.svg"
        baseColor:
          $ref: "#/components/schemas/SettingBaseColor"
        cardColor:
          $ref: "#/components/schemas/SettingCardColor"
        primaryColor:
          $ref: "#/components/schemas/SettingPrimaryColor"
        secondaryColor:
          $ref: "#/components/schemas/SettingSecondaryColor"
    DarkColor:
      type: object
      properties:
        dark_image:
          type: string
          format: uri
          example: "http://localhost:5000/uploads/light.svg"
        baseColor:
          $ref: "#/components/schemas/SettingBaseColor"
        cardColor:
          $ref: "#/components/schemas/SettingCardColor"
        primaryColor:
          $ref: "#/components/schemas/SettingPrimaryColor"
        secondaryColor:
          $ref: "#/components/schemas/SettingSecondaryColor"
    SettingBaseColor:
      type: object
      properties:
        background:
          type: string
          example: "#FFFFFF"
        foreground:
          type: string
          example: "#191B21"
    SettingCardColor:
      type: object
      properties:
        card:
          type: string
          example: "#dbeafe"
        cardForeground:
          type: string
          example: "#193cb8"
    SettingPrimaryColor:
      type: object
      properties:
        primary:
          type: string
          example: "#dbeafe"
        primaryForeground:
          type: string
          example: "#191B21"
    SettingSecondaryColor:
      type: object
      properties:
        secondary:
          type: string
          example: "#155dfc"
        secondaryForeground:
          type: string
          example: "#FFFFFF"
    CreateLeaveRequest:
      type: object
      required:
        - leave_type
      properties:
        leave_type:
          $ref: "#/components/schemas/leave_type"
        start_date:
          type: string
          format: date
          description: Required for personal leave
        end_date:
          type: string
          format: date
          description: Required for personal leave
        title:
          type: string
          description: Required for personal leave
        reason:
          type: string
          description: Required for personal leave
        id_special:
          type: string
          description: Required if leave_type is special_leave
        id_mandatory:
          type: string
          description: Required if leave_type is mandatory_leave
    UpdateLeaveRequest:
      type: object
      required:
        - status
      properties:
        status:
          $ref: "#/components/schemas/status"
        reason:
          type: string
    UserResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Data retrieve successfully"
        data:
          $ref: "#/components/schemas/User"
    User:
      type: object
      properties:
        NIK:
          type: string
        fullname:
          type: string
        isMale:
          type: boolean
        status:
          type: object
          properties:
            id:
              type: integer
            name:
              type: string
            slug:
              type: string
        role:
          type: object
          properties:
            id:
              type: integer
            name:
              type: string
            slug:
              type: string
        balance:
          type: object
          properties:
            total_amount:
              type: integer
            current_amount:
              type: integer
            carried_amount:
              type: integer
            last_two_year_amount:
              type: integer
            used_days:
              type: integer
            pending_request:
              type: integer
    UserListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
        pagination:
          $ref: "#/components/schemas/Pagination"
        data:
          type: array
          items:
            $ref: "#/components/schemas/User"
    LeaveTrendResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
        data:
          type: object
          properties:
            nik:
              type: string
            trend:
              type: object
              additionalProperties:
                $ref: "#/components/schemas/LeaveTrendYear"
    LeaveTrendYear:
      type: object
      properties:
        mandatory_leave:
          type: integer
        special_leave:
          type: integer
        personal_leave:
          type: integer
    ModifyBalanceRequest:
      type: object
      properties:
        adjustment_value:
          type: integer
        notes:
          type: string
        leave_type:
          type: string
          enum: [this_year_leave, last_year_leave, last_two_year]
        operation:
          type: string
          enum: [add_amount, reduce_amount]
    ModifyBalanceResponse:
      type: object
      properties:
        message:
          type: string
          example: Balance adjusted successfully
        data:
          type: array
          items:
            oneOf:
              - $ref: "#/components/schemas/tb_balance"
              - $ref: "#/components/schemas/tb_balance_adjustment"
    UserLeaveListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
        pagination:
          $ref: "#/components/schemas/Pagination"
        data:
          type: array
          items:
            $ref: "#/components/schemas/tb_leave_with_log"
    LeaveLogListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
        pagination:
          $ref: "#/components/schemas/Pagination"
        data:
          type: array
          items:
            $ref: "#/components/schemas/tb_leave_with_log"
    UserMandatoryLeaveListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "All mandatory leave was successfully taken"
        pagination:
          $ref: "#/components/schemas/Pagination"
        data:
          type: array
          items:
            $ref: "#/components/schemas/tb_mandatory_leave_extended"
    BalanceAdjustmentListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message: 
          type: string
          example: "Balance Adjustment logs retrieved successfully"
        data:
          type: object
          properties:
            pagination:
              $ref: "#/components/schemas/Pagination"
            data:
              type: array
              items:
                $ref: "#/components/schemas/BalanceAdjustmentItem"
    BalanceAdjustmentItem:
      type: object
      properties:
        id:
          type: string
          format: uuid
        NIK:
          type: string
        name:
          type: string
        adjustment_value:
          type: integer
        balance_year:
          type: string
        date:
          type: string
        time:
          type: string
        actor:
          type: string
        notes:
          type: string
    tb_leave_with_log:
      allOf:
        - $ref: "#/components/schemas/tb_leave"
        - type: object
          properties:
            leave_log:
              type: object
              properties:
                reason:
                  type: string
                  example: "-"
                balances_used:
                  type: object
                actor_fullname:
                  type: string
                  example: "-"
    tb_mandatory_leave_extended:
      allOf:
        - $ref: "#/components/schemas/tb_mandatory_leave"
        - type: object
          properties:
            message:
              type: string
              example: "konfimasi cuti sebelum tanggal 24 September 2025"
            taken:
              type: boolean
              example: false
    tb_settings:
      type: object
      properties:
        id:
          type: string
          format: uuid
        light_image:
          type: string
        light_background:
          type: string
        light_foreground:
          type: string
        light_card:
          type: string
        light_cardForeground:
          type: string
        light_primary:
          type: string
        light_primaryForeground:
          type: string
        light_secondary:
          type: string
        light_secondaryForeground:
          type: string
        dark_image:
          type: string
        dark_background:
          type: string
        dark_foreground:
          type: string
        dark_card:
          type: string
        dark_cardForeground:
          type: string
        dark_primary:
          type: string
        dark_primaryForeground:
          type: string
        dark_secondary:
          type: string
        dark_secondaryForeground:
          type: string
        created_at:
          type: string
          format: date-time
    tb_balance:
      type: object
      properties:
        id_balance:
          type: string
          format: uuid
        amount:
          type: integer
        receive_date:
          type: string
          format: date-time
        expired_date:
          type: string
          format: date-time
        NIK:
          type: string
        created_at:
          type: string
          format: date-time
    tb_leave:
      type: object
      properties:
        id_leave:
          type: string
          format: uuid
        title:
          type: string
        leave_type:
          $ref: "#/components/schemas/leave_type"
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        total_days:
          type: integer
        reason:
          type: string
        status:
          $ref: "#/components/schemas/status"
        created_at:
          type: string
          format: date-time
        NIK:
          type: string
        fullname:
          type: string
        id_special:
          type: string
        id_mandatory:
          type: string
    tb_mandatory_leave:
      type: object
      properties:
        id_mandatory:
          type: string
          format: uuid
        title:
          type: string
        is_active:
          type: boolean
        description:
          type: string
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        created_at:
          type: string
          format: date-time
    tb_special_leave:
      type: object
      properties:
        id_special:
          type: string
          format: uuid
        title:
          type: string
        applicable_gender:
          $ref: "#/components/schemas/applicable_gender"
        duration:
          type: integer
        type:
          $ref: "#/components/schemas/special_leave_type"
        is_active:
          type: boolean
        description:
          type: string
        created_at:
          type: string
          format: date-time
    tb_balance_adjustment:
      type: object
      properties:
        id_adjustment:
          type: string
          format: uuid
        NIK:
          type: string
        fullname:
          type: string
        adjustment_value:
          type: integer
        notes:
          type: string
        created_at:
          type: string
          format: date-time
        actor:
          type: string
        balance_year:
          type: integer
        id_balance:
          type: string
          format: uuid
    tb_leave_log:
      type: object
      properties:
        id_log:
          type: string
          format: uuid
        old_status:
          $ref: "#/components/schemas/status"
        new_status:
          $ref: "#/components/schemas/status"
        reason:
          type: string
        changed_at:
          type: string
          format: date-time
        changed_by_nik:
          type: string
        actor_fullname:
          type: string
        id_leave:
          type: string
          format: uuid
        balances_used:
          type: object
    tb_jwt_token:
      type: object
      properties:
        access_token:
          type: string
        NIK:
          type: string
        device_id:
          type: string
        device_info:
          type: string
        created_at:
          type: string
          format: date-time
    applicable_gender:
      type: string
      enum:
        - m
        - f
        - mf
    leave_type:
      type: string
      enum:
        - personal_leave
        - special_leave
        - mandatory_leave
    status:
      type: string
      enum:
        - approved
        - pending
        - rejected
        - expired
    special_leave_type:
      type: string
      enum:
        - day
        - month
    LeaveListResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        pagination:
          type: object
          properties:
            current_page:
              type: integer
            last_visible_page:
              type: integer
            has_next_page:
              type: integer
            page:
              type: integer
            limit:
              type: integer
            total:
              type: integer
            totalPages:
              type: integer
        data:
          type: array
          items:
            $ref: "#/components/schemas/tb_leave"
    SpecialLeaveListResponse:
      type: object
      properties:
        message:
          type: string
        data:
          type: array
          items:
            $ref: "#/components/schemas/tb_special_leave"
        pagination:
          type: object
          properties:
            page:
              type: integer
            limit:
              type: integer
            total:
              type: integer
            totalPages:
              type: integer
    MandatoryLeaveListResponse:
      type: object
      properties:
        message:
          type: string
        data:
          type: array
          items:
            $ref: "#/components/schemas/tb_mandatory_leave"
        pagination:
          type: object
          properties:
            page:
              type: integer
            limit:
              type: integer
            total:
              type: integer
            totalPages:
              type: integer
    CreateSpecialLeaveRequest:
      type: object
      properties:
        title:
          type: string
        applicable_gender:
          $ref: "#/components/schemas/applicable_gender"
        duration:
          type: integer
        type:
          $ref: "#/components/schemas/special_leave_type"
        description:
          type: string
    UpdateSpecialLeaveRequest:
      type: object
      properties:
        title:
          type: string
        applicable_gender:
          $ref: "#/components/schemas/applicable_gender"
        duration:
          type: integer
        type:
          $ref: "#/components/schemas/special_leave_type"
        description:
          type: string
        is_active:
          type: boolean
    CreateMandatoryLeaveRequest:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
    UpdateMandatoryLeaveRequest:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        is_active:
          type: boolean
